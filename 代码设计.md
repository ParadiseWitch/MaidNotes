# 代码设计

使用golang的泛型设计一组函数，用于字符串转各种数字类型
```go
package main

import (
	"fmt"
	"strconv"
)

type Int int

func (i *Int) Parse(s string) error {
	v, err := strconv.Atoi(s)
	if err != nil {
		return err
	}
	*i = Int(v)
	return nil
}

type Float64 float64

func (i *Float64) Parse(s string) error {
	v, err := strconv.ParseFloat(s, 64)
	if err != nil {
		return err
	}
	*i = Float64(v)
	return nil
}

type Number interface {
	Int | Float64
}

type Parser interface {
	Parse(string) error
}

func ParseNumber[N Number](s string) (N, error) {
	n := new(N)
	if parser, ok := any(n).(Parser); ok {
		err := parser.Parse(s)
		return *n, err
	}
	return *n, fmt.Errorf("unsupported number type %T", n)
}

func main() {
	func() {
		s := "42"
		i, _ := ParseNumber[Int](s)
		fmt.Println(i)
	}()

	func() {
		s := "42.42"
		f, _ := ParseNumber[Float64](s)
		fmt.Println(f)
	}()
}

```